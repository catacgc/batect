


<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Documentation for batect, the build and testing environments as code tool">
      
      
        <link rel="canonical" href="https://batect.dev/GettingStarted.html">
      
      
        <meta name="author" content="Charles Korn">
      
      <link rel="shortcut icon" href="assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.1, mkdocs-material-5.1.4">
    
    
      
        <title>Getting started tutorial - batect documentation</title>
      
    
    
      <link rel="stylesheet" href="assets/stylesheets/main.c4007cdc.min.css">
      
        <link rel="stylesheet" href="assets/stylesheets/palette.8435c73a.min.css">
      
      
        
        
        <meta name="theme-color" content="#2196f3">
      
    
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto",-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono",SFMono-Regular,Consolas,Menlo,monospace}</style>
      
    
    
    
      <link rel="stylesheet" href="assets/3rdparty/asciinema-player.css">
    
      <link rel="stylesheet" href="assets/styles.css">
    
    
      
        
<link rel="preconnect dns-prefetch" href="https://www.google-analytics.com">
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-63947227-2","auto"),ga("set","anonymizeIp",!0),ga("send","pageview"),document.addEventListener("DOMContentLoaded",function(){document.forms.search&&document.forms.search.query.addEventListener("blur",function(){if(this.value){var e=document.location.pathname;ga("send","pageview",e+"?q="+this.value)}})}),document.addEventListener("DOMContentSwitch",function(){ga("send","pageview")})</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
      
    
    
  </head>
  
  
    
    
    <body dir="ltr" data-md-color-primary="blue" data-md-color-accent="light-blue">
  
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#getting-started-tutorial" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid" aria-label="Header">
    <a href="https://batect.dev" title="batect documentation" class="md-header-nav__button md-logo" aria-label="batect documentation">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    <label class="md-header-nav__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header-nav__title" data-md-component="header-title">
      
        <div class="md-header-nav__ellipsis">
          <span class="md-header-nav__topic md-ellipsis">
            batect documentation
          </span>
          <span class="md-header-nav__topic md-ellipsis">
            
              Getting started tutorial
            
          </span>
        </div>
      
    </div>
    
      <label class="md-header-nav__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active">
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" data-md-component="search-reset" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header-nav__source">
        
<a href="https://github.com/batect/batect/" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    batect/batect
  </div>
</a>
      </div>
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
        
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="https://batect.dev" title="batect documentation" class="md-nav__button md-logo" aria-label="batect documentation">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    batect documentation
  </label>
  
    <div class="md-nav__source">
      
<a href="https://github.com/batect/batect/" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    batect/batect
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="index.html" title="Introduction" class="md-nav__link">
      Introduction
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="Setup.html" title="Setup" class="md-nav__link">
      Setup
    </a>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Getting started tutorial
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 9h14V7H3v2m0 4h14v-2H3v2m0 4h14v-2H3v2m16 0h2v-2h-2v2m0-10v2h2V7h-2m0 6h2v-2h-2v2z"/></svg>
        </span>
      </label>
    
    <a href="GettingStarted.html" title="Getting started tutorial" class="md-nav__link md-nav__link--active">
      Getting started tutorial
    </a>
    
      
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#installation" class="md-nav__link">
    Installation
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#first-task" class="md-nav__link">
    First task
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#first-running-application" class="md-nav__link">
    First running application
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#first-dependency" class="md-nav__link">
    First dependency
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#first-prerequisite" class="md-nav__link">
    First prerequisite
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#summary" class="md-nav__link">
    Summary
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#where-next" class="md-nav__link">
    Where next?
  </a>
  
</li>
      
    </ul>
  
</nav>
    
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="Comparison.html" title="Comparison with other tools" class="md-nav__link">
      Comparison with other tools
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5">
    
    <label class="md-nav__link" for="nav-5">
      Configuration file reference
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="Configuration file reference" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
        </span>
        Configuration file reference
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="config/Overview.html" title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="config/ConfigVariables.html" title="Config Variables" class="md-nav__link">
      Config Variables
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="config/Containers.html" title="Containers" class="md-nav__link">
      Containers
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="config/Tasks.html" title="Tasks" class="md-nav__link">
      Tasks
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="CLIReference.html" title="CLI reference" class="md-nav__link">
      CLI reference
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="TaskLifecycle.html" title="Task lifecycle" class="md-nav__link">
      Task lifecycle
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-8" type="checkbox" id="nav-8">
    
    <label class="md-nav__link" for="nav-8">
      Working with languages and developer tools
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="Working with languages and developer tools" data-md-level="1">
      <label class="md-nav__title" for="nav-8">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
        </span>
        Working with languages and developer tools
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="tools/DotNetCore.html" title=".NET Core" class="md-nav__link">
      .NET Core
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="tools/Docker.html" title="Docker" class="md-nav__link">
      Docker
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="tools/Golang.html" title="Golang" class="md-nav__link">
      Golang
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="tools/Gradle.html" title="Gradle" class="md-nav__link">
      Gradle
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="tools/Node.html" title="Node.js" class="md-nav__link">
      Node.js
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="tools/Ruby.html" title="Ruby" class="md-nav__link">
      Ruby
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="tools/Seq.html" title="Seq" class="md-nav__link">
      Seq
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-9" type="checkbox" id="nav-9">
    
    <label class="md-nav__link" for="nav-9">
      Working with CI systems
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="Working with CI systems" data-md-level="1">
      <label class="md-nav__title" for="nav-9">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
        </span>
        Working with CI systems
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="tools/CIGeneral.html" title="General" class="md-nav__link">
      General
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="tools/Buildkite.html" title="Buildkite" class="md-nav__link">
      Buildkite
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="tools/CircleCI.html" title="CircleCI" class="md-nav__link">
      CircleCI
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="tools/GitHubActions.html" title="GitHub Actions" class="md-nav__link">
      GitHub Actions
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="tools/TravisCI.html" title="Travis CI" class="md-nav__link">
      Travis CI
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-10" type="checkbox" id="nav-10">
    
    <label class="md-nav__link" for="nav-10">
      Tips and tricks
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="Tips and tricks" data-md-level="1">
      <label class="md-nav__title" for="nav-10">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
        </span>
        Tips and tricks
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="tips/IDEIntegration.html" title="IDE integration" class="md-nav__link">
      IDE integration
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="tips/Performance.html" title="Performance" class="md-nav__link">
      Performance
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="tips/BuildArtifactsOwnedByRoot.html" title="Build artifacts are owned by root" class="md-nav__link">
      Build artifacts are owned by root
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="tips/WaitingForDependenciesToBeReady.html" title="Waiting for dependencies to be ready" class="md-nav__link">
      Waiting for dependencies to be ready
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="tips/Proxies.html" title="Proxies" class="md-nav__link">
      Proxies
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="tips/Windows.html" title="Windows" class="md-nav__link">
      Windows
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="SampleProjects.html" title="Sample projects" class="md-nav__link">
      Sample projects
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="https://github.com/batect/batect/releases" title="Release notes" class="md-nav__link">
      Release notes
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="https://github.com/batect/batect/blob/master/ROADMAP.md" title="Roadmap" class="md-nav__link">
      Roadmap
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#installation" class="md-nav__link">
    Installation
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#first-task" class="md-nav__link">
    First task
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#first-running-application" class="md-nav__link">
    First running application
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#first-dependency" class="md-nav__link">
    First dependency
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#first-prerequisite" class="md-nav__link">
    First prerequisite
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#summary" class="md-nav__link">
    Summary
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#where-next" class="md-nav__link">
    Where next?
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/batect/batect/edit/master/docs/content/GettingStarted.md" title="Edit this page" class="md-content__button md-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>
                  </a>
                
                
                  
                
                
                <h1 id="getting-started-tutorial">Getting started tutorial<a class="headerlink" href="#getting-started-tutorial" title="Permanent link">&para;</a></h1>
<p>In this tutorial, we'll create a TypeScript-based API that makes calls to another API and uses Yarn to manage NPM packages, and use
batect to manage our development environment and tasks.</p>
<p>This tutorial is based on the <a href="https://github.com/batect/batect-sample-typescript">TypeScript sample project</a>, and assumes some
basic familiarity with Docker and Yarn.</p>
<p>It should take 15-20 minutes to complete.</p>
<h2 id="installation">Installation<a class="headerlink" href="#installation" title="Permanent link">&para;</a></h2>
<p>Before you begin, follow the <a href="Setup.html">setup instructions</a> to setup batect.</p>
<h2 id="first-task">First task<a class="headerlink" href="#first-task" title="Permanent link">&para;</a></h2>
<p>Let's start by defining our very first task. As is tradition, we'll be creating a "hello world" task.</p>
<p>In batect, there are two major concepts:</p>
<ul>
<li>
<p><strong>Tasks</strong> define commands to run and how to run them - for example, building your application, running tests or deploying your
  application.</p>
</li>
<li>
<p><strong>Containers</strong> define the environment tasks run in - for example, the Docker image used, the folders mounted from your local
  machine and the ports exposed back to your local machine.</p>
</li>
</ul>
<p>Both tasks and containers are defined in a YAML configuration file, normally called <code>batect.yml</code>. Let's start by defining our build
environment container, <code>build-env</code>:</p>
<div class="highlight"><pre><span></span><code><span class="nt">containers</span><span class="p">:</span>
  <span class="nt">build-env</span><span class="p">:</span>
    <span class="nt">image</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">node:14.3.0</span>
</code></pre></div>

<p><code>build-env</code> uses the publicly-available <code>node</code> image, and specifies the particular version of the image to use.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>It's a good idea to specify a particular image tag (eg. <code>14.3.0</code> in our example above) rather than using <code>latest</code> - this
ensures everyone using your configuration runs the same image.</p>
</div>
<p>We can use that container to define our <code>hello-world</code> task:</p>
<div class="highlight"><pre><span></span><code><span class="nt">containers</span><span class="p">:</span>
  <span class="nt">build-env</span><span class="p">:</span>
    <span class="nt">image</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">node:14.3.0</span>

<span class="hll"><span class="nt">tasks</span><span class="p">:</span>
</span><span class="hll">  <span class="nt">hello-world</span><span class="p">:</span>
</span><span class="hll">    <span class="nt">description</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">Say hello to everyone</span>
</span><span class="hll">    <span class="nt">run</span><span class="p">:</span>
</span><span class="hll">      <span class="nt">container</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">build-env</span>
</span><span class="hll">      <span class="nt">command</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">echo &#39;Hello world!&#39;</span>
</span></code></pre></div>

<p>Then we can run our task with <code>./batect hello-world</code>:</p>
<div class="highlight"><pre><span></span><code>Running hello-world...
build-env: running echo &#39;Hello world!&#39;

Hello world!

hello-world finished with exit code 0 in 1.2s.
</code></pre></div>

<p>Congratulations! You've successfully configured and run your first batect task.</p>
<p>It's worth spending a moment to explain what batect just did:</p>
<ul>
<li>First, batect loaded our configuration from <code>batect.yml</code>.</li>
<li>It then checked if the <code>node:14.3.0</code> image had already been pulled, and if it was not already pulled, pulled it.</li>
<li>Next, it started our <code>build-env</code> container, which ran our hello world command.</li>
<li>Once the container finished, it then cleaned up the container, leaving nothing running.</li>
</ul>
<p>There's one more thing we can check: <code>./batect --list-tasks</code>. <code>--list-tasks</code> doesn't run a task - instead, it prints all the available
tasks in our configuration file, including any <a href="config/Tasks.html#description"><code>description</code></a> or <a href="config/Tasks.html#group"><code>group</code></a>.</p>
<p>Let's try running <code>./batect --list-tasks</code> (or <code>./batect -T</code> for short) now:</p>
<div class="highlight"><pre><span></span><code>Available tasks:
- hello-world: Say hello to everyone
</code></pre></div>

<p>There's nothing too surprising here, given we just created our configuration file. However, as our project grows, this can be very useful
for someone who is unfamiliar with our project and wants to understand what tasks they can perform.</p>
<h2 id="first-running-application">First running application<a class="headerlink" href="#first-running-application" title="Permanent link">&para;</a></h2>
<p>So we have our first task, but it's not exactly earth-shattering. Let's fix that by creating our TypeScript application.</p>
<p>Normally, we could run <code>yarn init</code> and then <code>yarn add typescript</code> to do this, but then we're using the version of Yarn installed on our
machine, if there even is one.</p>
<p>It would be much better if we could use the version of Yarn available in our <code>build-env</code> container - then we don't need to install
anything, and we don't have to worry about using different versions.</p>
<p>To do that, let's create a <code>shell</code> task that starts a shell in our build environment:</p>
<div class="highlight"><pre><span></span><code><span class="c1"># ... other configuration omitted for clarity</span>

<span class="nt">tasks</span><span class="p">:</span>
  <span class="nt">shell</span><span class="p">:</span>
    <span class="nt">description</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">Start a shell in the development environment</span>
    <span class="nt">run</span><span class="p">:</span>
      <span class="nt">container</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">build-env</span>
      <span class="nt">command</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">bash</span>
</code></pre></div>

<p>We can run this with <code>./batect shell</code>, then run <code>yarn init .</code> and <code>yarn add typescript</code> to create a <code>package.json</code> with a reference to
TypeScript. However, if you exit the shell with <code>exit</code>, after batect finishes cleaning up, you'll notice there's no <code>package.json</code> in
our project directory.</p>
<p>What happened to <code>package.json</code>? By default, containers started with batect share nothing with the host machine, so <code>package.json</code> was
lost when the container was removed by batect. The benefit of this is that containers are as isolated as possible, making tasks run
consistently across different machines, even different operating systems.</p>
<p>However, complete isolation isn't particularly useful - we need to keep these files around, and we'll need to be able to share our
source code with the container soon as well.</p>
<p>Let's mount our project directory into <code>build-env</code> with <a href="config/Containers.html#volumes"><code>volumes</code></a>:</p>
<div class="highlight"><pre><span></span><code><span class="nt">containers</span><span class="p">:</span>
  <span class="nt">build-env</span><span class="p">:</span>
    <span class="nt">image</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">node:14.3.0</span>
<span class="hll">    <span class="nt">volumes</span><span class="p">:</span>
</span><span class="hll">      <span class="p p-Indicator">-</span> <span class="nt">local</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">.</span>
</span><span class="hll">        <span class="nt">container</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">/code</span>
</span><span class="hll">        <span class="nt">options</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">cached</span>
</span><span class="hll">    <span class="nt">working_directory</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">/code</span>
</span>
<span class="c1"># ... tasks omitted for clarity</span>
</code></pre></div>

<p>With this change, when <code>build-env</code> starts, the project directory (the directory containing <code>batect.yml</code>) will be mounted into the
container at <code>/code</code>. Setting <code>working_directory</code> to <code>/code</code> means that the container will start in that directory by default.</p>
<p>If you start a shell with <code>./batect shell</code> and run <code>yarn init .</code> and <code>yarn add typescript</code> again, you'll notice that this time,
<code>package.json</code> has been saved to your local machine.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>If you're using macOS or Windows, you may have noticed that <code>yarn add typescript</code> took longer than normal. This is due to the
overhead introduced by using <code>node_modules</code> from your local machine inside the container.</p>
<p>Unfortunately, the performance of Docker volume mounts on macOS and Windows isn't great, and even with <code>options: cached</code>, the
difference can be noticeable.</p>
<p>The solution is to use a batect cache for the <code>node_modules</code> folder, for example:</p>
<div class="highlight"><pre><span></span><code><span class="nt">containers</span><span class="p">:</span>
  <span class="nt">build-env</span><span class="p">:</span>
    <span class="nt">image</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">node:14.3.0</span>
    <span class="nt">volumes</span><span class="p">:</span>
      <span class="p p-Indicator">-</span> <span class="nt">local</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">.</span>
        <span class="nt">container</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">/code</span>
        <span class="nt">options</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">cached</span>
<span class="hll">      <span class="p p-Indicator">-</span> <span class="nt">type</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">cache</span>
</span><span class="hll">        <span class="nt">container</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">/code/node_modules</span>
</span><span class="hll">        <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">node_modules</span>
</span>    <span class="nt">working_directory</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">/code</span>
</code></pre></div>

<p>This cache persists between each task run and doesn't incur the same performance penalty as mounting a local directory.</p>
<p>There's more details about this in the <a href="tips/Performance.html">I/O performance section</a> of the documentation.</p>
</div>
<p>With that out of the way, let's create a basic HTTP API. Create a file called <code>index.ts</code> in the same directory as our <code>batect.yml</code>
with the following contents:</p>
<div class="highlight"><pre><span></span><code><span class="kr">import</span> <span class="o">*</span> <span class="kr">as</span> <span class="nx">express</span> <span class="nx">from</span> <span class="s2">&quot;express&quot;</span><span class="p">;</span>

<span class="kr">const</span> <span class="nx">app</span> <span class="o">=</span> <span class="nx">express</span><span class="p">();</span>
<span class="kr">const</span> <span class="nx">port</span> <span class="o">=</span> <span class="mi">8080</span><span class="p">;</span>

<span class="nx">app</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s2">&quot;/&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">res</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="s2">&quot;Hello from the API!&quot;</span><span class="p">);</span>
<span class="p">});</span>

<span class="nx">app</span><span class="p">.</span><span class="nx">listen</span><span class="p">(</span><span class="nx">port</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="sb">`Listening on port </span><span class="si">${</span><span class="nx">port</span><span class="si">}</span><span class="sb">.`</span><span class="p">);</span>
<span class="p">});</span>
</code></pre></div>

<p>We'll need a few more Yarn packages - start another shell and run <code>yarn add @types/express express ts-node</code> to add the remaining
dependencies.</p>
<p>Let's run our application and see it in action. Add a <code>run</code> task to <code>batect.yml</code>:</p>
<div class="highlight"><pre><span></span><code><span class="nt">tasks</span><span class="p">:</span>
  <span class="nt">run</span><span class="p">:</span>
    <span class="nt">description</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">Run the application</span>
    <span class="nt">run</span><span class="p">:</span>
      <span class="nt">container</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">build-env</span>
      <span class="nt">command</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">yarn exec ts-node index.ts</span>
      <span class="nt">ports</span><span class="p">:</span>
        <span class="p p-Indicator">-</span> <span class="nt">local</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">8080</span>
          <span class="nt">container</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">8080</span>

<span class="c1"># ... other configuration omitted for clarity</span>
</code></pre></div>

<p>Our <code>command</code> uses Yarn and <code>ts-node</code> to run our TypeScript application, and maps port 8080 on our local machine to port 8080 on the
container. This means that if we go to <a href="http://localhost:8080">http://localhost:8080</a> on our local machine, we'll see our "Hello from
the API!" message.</p>
<p>batect also supports mapping ports in container definitions, however, given we only need the port when running the application,
we've mapped the port as part of the task definition. Both have exactly the same end result.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>We're using <code>ts-node</code> in this tutorial because it's simple and convenient. A production-grade application would compile TypeScript
down to JavaScript using <code>tsc</code> and run it using <code>node</code>. We'll change this below.</p>
</div>
<p>We're pretty much done now - we can run our application in a consistent, isolated environment with a single command: <code>./batect run</code>.</p>
<p>However, there's one more thing we should do to make it easy for others to start using our project. With the current setup, people
using our project will need to run <code>./batect shell</code> and then run <code>yarn install</code> to download the NPM packages we're using. It would be
much better if there was a batect task they could run that did this for them, so let's add one:</p>
<div class="highlight"><pre><span></span><code><span class="nt">tasks</span><span class="p">:</span>
  <span class="nt">setup</span><span class="p">:</span>
    <span class="nt">description</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">Install dependencies needed to build and run the application</span>
    <span class="nt">run</span><span class="p">:</span>
      <span class="nt">container</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">build-env</span>
      <span class="nt">command</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">yarn install</span>

<span class="c1"># ... other configuration omitted for clarity</span>
</code></pre></div>

<p>Now, when someone wants to start using our project, they just need to run <code>./batect setup</code> once, then <code>./batect run</code> to start the
application - easy!</p>
<h2 id="first-dependency">First dependency<a class="headerlink" href="#first-dependency" title="Permanent link">&para;</a></h2>
<p>Now that we've got a basic API up and running, let's expand our API to include calling an external service - and expand our batect setup
to orchestrate setting up both our application and the external service. We're going to enhance our 'hello world' message with a joke of
the day.</p>
<p>Let's start by adding the joke service to our <code>batect.yml</code>:</p>
<div class="highlight"><pre><span></span><code><span class="nt">containers</span><span class="p">:</span>
  <span class="c1"># ... build-env omitted for clarity</span>

<span class="hll">  <span class="nt">joke-service</span><span class="p">:</span>
</span><span class="hll">    <span class="nt">image</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">yesinteractive/dadjokes</span>
</span></code></pre></div>

<p>We'll also need to tell batect to start <code>joke-service</code> when it runs our application. We can do this by adding it as a dependency for the
<code>run</code> task:</p>
<div class="highlight"><pre><span></span><code><span class="nt">tasks</span><span class="p">:</span>
  <span class="nt">run</span><span class="p">:</span>
    <span class="nt">description</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">Run the application</span>
<span class="hll">    <span class="nt">dependencies</span><span class="p">:</span>
</span><span class="hll">      <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">joke-service</span>
</span>    <span class="nt">run</span><span class="p">:</span>
      <span class="nt">container</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">build-env</span>
      <span class="nt">command</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">yarn exec ts-node index.ts</span>
      <span class="nt">ports</span><span class="p">:</span>
        <span class="p p-Indicator">-</span> <span class="nt">local</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">8080</span>
          <span class="nt">container</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">8080</span>
</code></pre></div>

<p>Finally, we need to update our application to call the service and return the joke in our message. The joke service responds to <code>GET /</code>
requests with jokes, so let's call that endpoint in <code>index.ts</code>:</p>
<div class="highlight"><pre><span></span><code><span class="hll"><span class="kr">import</span> <span class="nx">fetch</span> <span class="nx">from</span> <span class="s2">&quot;node-fetch&quot;</span><span class="p">;</span>
</span><span class="kr">import</span> <span class="o">*</span> <span class="kr">as</span> <span class="nx">express</span> <span class="nx">from</span> <span class="s2">&quot;express&quot;</span><span class="p">;</span>

<span class="kr">const</span> <span class="nx">app</span> <span class="o">=</span> <span class="nx">express</span><span class="p">();</span>
<span class="kr">const</span> <span class="nx">port</span> <span class="o">=</span> <span class="mi">8080</span><span class="p">;</span>

<span class="hll"><span class="nx">app</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s2">&quot;/&quot;</span><span class="p">,</span> <span class="nx">async</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span><span class="hll">  <span class="kr">const</span> <span class="nx">response</span> <span class="o">=</span> <span class="nx">await</span> <span class="nx">fetch</span><span class="p">(</span><span class="s2">&quot;http://joke-service&quot;</span><span class="p">);</span>
</span><span class="hll">
</span><span class="hll">  <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">response</span><span class="p">.</span><span class="nx">ok</span><span class="p">)</span> <span class="p">{</span>
</span><span class="hll">    <span class="nx">res</span><span class="p">.</span><span class="nx">sendStatus</span><span class="p">(</span><span class="mi">503</span><span class="p">);</span>
</span><span class="hll">    <span class="nx">res</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="sb">`Joke service call failed with HTTP </span><span class="si">${</span><span class="nx">response</span><span class="p">.</span><span class="nx">status</span><span class="si">}</span><span class="sb"> (</span><span class="si">${</span><span class="nx">response</span><span class="p">.</span><span class="nx">statusText</span><span class="si">}</span><span class="sb">)`</span><span class="p">);</span>
</span><span class="hll">    <span class="k">return</span><span class="p">;</span>
</span><span class="hll">  <span class="p">}</span>
</span><span class="hll">
</span><span class="hll">  <span class="kr">const</span> <span class="nx">responseBody</span> <span class="o">=</span> <span class="nx">await</span> <span class="nx">response</span><span class="p">.</span><span class="nx">json</span><span class="p">();</span>
</span><span class="hll">
</span><span class="hll">  <span class="nx">res</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="sb">`Hello from the API! The joke of the day is: </span><span class="si">${</span><span class="nx">responseBody</span><span class="p">.</span><span class="nx">Joke</span><span class="p">.</span><span class="nx">Opener</span><span class="si">}</span><span class="sb"> </span><span class="si">${</span><span class="nx">responseBody</span><span class="p">.</span><span class="nx">Joke</span><span class="p">.</span><span class="nx">Punchline</span><span class="si">}</span><span class="sb">`</span><span class="p">);</span>
</span><span class="hll"><span class="p">});</span>
</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">listen</span><span class="p">(</span><span class="nx">port</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="sb">`Listening on port </span><span class="si">${</span><span class="nx">port</span><span class="si">}</span><span class="sb">.`</span><span class="p">);</span>
<span class="p">});</span>
</code></pre></div>

<p>We now have a dependency on the <code>node-fetch</code> package, so run <code>yarn add node-fetch @types/node-fetch</code> from a shell to add it to <code>package.json</code>.</p>
<p>Finally, we can run the application with <code>./batect run</code>, and then open <a href="http://localhost:8080">http://localhost:8080</a> to see our new message,
complete with joke:</p>
<div class="highlight"><pre><span></span><code>Hello from the API! The joke of the day is: I made a belt out of watches once... It was a waist of time.
</code></pre></div>

<p>You might be wondering why we didn't have to expose any ports on the <code>joke-service</code> container, and how we could use <code>joke-service</code> as a hostname
to address that container. Under the hood, when batect starts a task, it also creates a <a href="https://docs.docker.com/network/bridge/">Docker network</a>
and adds all containers in the task to that network. This allows them to address each other by name (eg. making HTTP requests to <code>joke-service</code>)
and access any port without explicitly exposing the port or exposing it on the host machine.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>This same technique can be used to run integration or end-to-end tests against dependencies like external services or databases in consistent,
isolated environments.</p>
<p>Take a look at the <a href="SampleProjects.html">sample projects</a> for some examples of this. batect can also help
<a href="tips/WaitingForDependenciesToBeReady.html">manage the startup order of dependencies</a> to reduce flakiness and retries in tests.</p>
</div>
<h2 id="first-prerequisite">First prerequisite<a class="headerlink" href="#first-prerequisite" title="Permanent link">&para;</a></h2>
<p>The final major feature of batect that we'll explore is the concept of <a href="config/Tasks.html#prerequisites">prerequisites</a>.</p>
<p>These allow you to declare that one task requires another to run first. For example, maybe your application needs to be compiled before
it is run, some data needs to be generated before the tests are executed, or a number of tasks should be run as part of a pre-commit check.</p>
<p>To see this in action, let's add a task to compile our TypeScript down to JavaScript:</p>
<div class="highlight"><pre><span></span><code>  <span class="nt">build</span><span class="p">:</span>
    <span class="nt">description</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">Build the application</span>
    <span class="nt">run</span><span class="p">:</span>
      <span class="nt">container</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">build-env</span>
      <span class="nt">command</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">yarn exec tsc -- --outDir build --sourceMap --strict index.ts</span>
</code></pre></div>

<p>We can now change our <code>run</code> task to run <code>build</code> and then run that built JavaScript:</p>
<div class="highlight"><pre><span></span><code>  <span class="nt">run</span><span class="p">:</span>
    <span class="nt">description</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">Run the application</span>
<span class="hll">    <span class="nt">prerequisites</span><span class="p">:</span>
</span><span class="hll">      <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">build</span>
</span>    <span class="nt">run</span><span class="p">:</span>
      <span class="nt">container</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">build-env</span>
<span class="hll">      <span class="nt">command</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">yarn exec node -- build/index.js</span>
</span>      <span class="nt">ports</span><span class="p">:</span>
        <span class="p p-Indicator">-</span> <span class="nt">local</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">8080</span>
          <span class="nt">container</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">8080</span>
</code></pre></div>

<p>Voila! Running <code>./batect run</code> now runs the <code>build</code> task, then starts <code>run</code> to use our freshly built code.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>We're using <code>yarn exec</code> to start <code>node</code> in <code>run</code> to workaround issues with <code>node</code> not responding to signals such as Ctrl+C when running
in a container. There are more details on this in the <a href="tools/Node.html#issues-with-signals-not-being-handled-correctly">Node usage section</a>
of the batect documentation, including another solution to the issue.</p>
</div>
<h2 id="summary">Summary<a class="headerlink" href="#summary" title="Permanent link">&para;</a></h2>
<p>We've finished our whirlwind tour of batect. We can now easily setup, build and run our application in an isolated, consistent, repeatable
way, and others can quickly start working with our project just by running <code>./batect --list-tasks</code>.</p>
<h2 id="where-next">Where next?<a class="headerlink" href="#where-next" title="Permanent link">&para;</a></h2>
<ul>
<li>Take a look at the many <a href="SampleProjects.html">sample projects</a> for inspiration for your own projects</li>
<li>Dive into the comprehensive <a href="config/Overview.html">reference for configuration options</a></li>
</ul>
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid" aria-label="Footer">
        
          <a href="Setup.html" title="Setup" class="md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
            </div>
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Setup
              </div>
            </div>
          </a>
        
        
          <a href="Comparison.html" title="Comparison with other tools" class="md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Comparison with other tools
              </div>
            </div>
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            Copyright &copy; 2017-2020 Charles Korn. Documentation uses <a href="https://twemoji.twitter.com/">Twemoji</a>, licensed under the CC-BY 4.0 license.
          </div>
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
      </div>
      
  <div class="md-footer-social">
    
      
      
      <a href="https://github.com/batect/batect" target="_blank" rel="noopener" title="github.com" class="md-footer-social__link">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
      </a>
    
      
      
      <a href="https://spectrum.chat/batect" target="_blank" rel="noopener" title="spectrum.chat" class="md-footer-social__link">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><path d="M416 192c0-88.4-93.1-160-208-160S0 103.6 0 192c0 34.3 14.1 65.9 38 92-13.4 30.2-35.5 54.2-35.8 54.5-2.2 2.3-2.8 5.7-1.5 8.7S4.8 352 8 352c36.6 0 66.9-12.3 88.7-25 32.2 15.7 70.3 25 111.3 25 114.9 0 208-71.6 208-160zm122 220c23.9-26 38-57.7 38-92 0-66.9-53.5-124.2-129.3-148.1.9 6.6 1.3 13.3 1.3 20.1 0 105.9-107.7 192-240 192-10.8 0-21.3-.8-31.7-1.9C207.8 439.6 281.8 480 368 480c41 0 79.1-9.2 111.3-25 21.8 12.7 52.1 25 88.7 25 3.2 0 6.1-1.9 7.3-4.8 1.3-2.9.7-6.3-1.5-8.7-.3-.3-22.4-24.2-35.8-54.5z"/></svg>
      </a>
    
  </div>

    </div>
  </div>
</footer>
      
    </div>
    
      <script src="assets/javascripts/vendor.83fe6e3c.min.js"></script>
      <script src="assets/javascripts/bundle.7e1cb91c.min.js"></script><script id="__lang" type="application/json">{"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents"}</script>
      
      <script>
        app = initialize({
          base: ".",
          features: [],
          search: Object.assign({
            worker: "assets/javascripts/worker/search.37585f48.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script>
      
        <script src="assets/3rdparty/asciinema-player.js"></script>
      
    
  </body>
</html>